# xiXoi™ API Compliance Guide
## Platform API Approval Requirements

This document contains all information needed to apply for API approval with Meta, Google, LinkedIn, and TikTok.

---

## 1. APPLICATION OVERVIEW

### What xiXoi™ Does
xiXoi™ is an AI-powered advertising platform that automates ad creation and publishing across multiple social media platforms. Users upload content (image, video, or text description), and our AI generates optimized ad variants, targeting suggestions, and publishes campaigns directly to their connected ad accounts.

### Core User Flow
1. User uploads product content (image, video, or text description)
2. AI analyzes content and generates 4 platform-optimized ad variants
3. AI suggests targeting parameters (location, audience, budget)
4. User reviews and adjusts budget/location only
5. User pays for campaign publishing ($29 per campaign or $99/month unlimited)
6. User selects platforms (Meta, TikTok, Google, LinkedIn)
7. xiXoi™ publishes ads directly to selected platforms via OAuth-connected accounts
8. User tracks performance through platform dashboards

### Technical Stack
- **Frontend**: React, TypeScript, Vite
- **Backend**: Supabase (PostgreSQL database, Edge Functions)
- **AI**: Lovable AI Gateway (Google Gemini 2.5 Flash)
- **Authentication**: Supabase Auth (Google, Apple, Facebook OAuth + email/password)
- **Payments**: Stripe (checkout sessions, subscriptions, invoices)
- **Storage**: Supabase Storage (campaign assets bucket)

---

## 2. DATA COLLECTION & USAGE

### Data We Collect

#### User Profile Data
- Email address (from OAuth or signup)
- Full name (optional, from OAuth)
- User ID (UUID, generated by Supabase)
- OAuth provider (Google, Apple, Facebook)
- Subscription plan tier (free, pro, elite, agency)
- Stripe customer ID (for billing)

#### Campaign Data
- Campaign name
- Product description (text input)
- Upload content (images up to 5MB, videos up to 200MB)
- Upload type (image, video, or text-only)
- Status (draft, ready, published)
- Created/updated timestamps

#### Generated Ad Variants
- Platform (meta, tiktok, google, linkedin)
- AI-generated headline (platform-specific character limits)
- AI-generated body copy (platform-specific character limits)
- AI-generated CTA (call-to-action text)
- Variant type (static, video, ugc, roas_prediction)

#### Targeting Data (AI-Generated, User-Adjustable)
- Location (text input, user-editable)
- Daily budget ($5-$500 range, user-editable via slider)
- Suggested audience summary (AI-generated, read-only)
- Suggested audience reasoning (AI-generated, read-only)
- Recommended platforms (AI-generated, read-only)

#### Ad Platform Connections (OAuth Tokens)
- Access tokens (encrypted, stored in Supabase secrets)
- Refresh tokens (encrypted, stored in Supabase secrets)
- Platform account IDs (Meta Ad Account ID, TikTok Advertiser ID, Google Ads Customer ID, LinkedIn Organization ID)
- Token expiration timestamps

#### Ad Spend Tracking (Scale Elite tier only)
- Campaign ID (UUID)
- Platform (meta, tiktok, google, linkedin)
- Spend amount (numeric, USD)
- Spend date (date)
- Billing period (start/end dates)
- Billed status (boolean)
- Stripe invoice ID (after billing)

### How We Use Data

1. **Campaign Creation**: Store uploaded content, generate AI ad variants, display targeting suggestions
2. **Ad Publishing**: Use OAuth tokens to publish campaigns to user-connected ad accounts via platform APIs
3. **Billing**: Process payments via Stripe, track subscription status, invoice ad spend percentage (elite tier)
4. **Watermark Removal**: Apply "Powered By xiXoi™" watermark unless user has paid to remove it
5. **Performance Tracking**: Store campaign IDs returned by platforms (future feature: display performance metrics)

### Data Retention
- **User profiles**: Retained until account deletion
- **Campaign data**: Retained indefinitely unless user deletes campaign
- **OAuth tokens**: Retained until user disconnects platform or tokens expire
- **Ad spend records**: Retained indefinitely for billing/accounting compliance

### Data Security
- OAuth tokens encrypted at rest in Supabase
- HTTPS-only connections
- Row-Level Security (RLS) policies on all database tables
- User data isolated via `user_id` foreign keys
- No third-party data sharing (except Stripe for payments)

---

## 3. PLATFORM-SPECIFIC SPECIFICATIONS

### META (Facebook/Instagram) Marketing API

#### Ad Specifications
**Image Ads:**
- Formats: JPG, JPEG, PNG
- Max file size: 5MB
- Aspect ratios:
  - Feed: 1.91:1 (recommended 1200x628px)
  - Carousel: 1:1 (recommended 1080x1080px)
  - Stories: 9:16 (recommended 1080x1920px)
- Min resolution: 600x315px

**Video Ads:**
- Formats: MP4, MOV
- Max file size: 4GB
- Max duration: 240 minutes (feed), 120 seconds (stories)
- Aspect ratios: 1.91:1, 1:1, 9:16, 4:5
- Min resolution: 600x315px

**Text Copy Limits:**
- Primary text: 125 characters max
- Headline: 40 characters max
- Description: 30 characters max
- CTA: Predefined options (Learn More, Shop Now, Sign Up, etc.)

#### Required API Permissions (OAuth Scopes)
- `ads_management` - Create and manage ad campaigns
- `ads_read` - Read ad campaign data
- `business_management` - Access business assets
- `pages_read_engagement` - Read Page content (for post ads)
- `instagram_basic` - Access Instagram account (for Instagram ads)
- `instagram_content_publish` - Publish to Instagram

#### API Endpoints We'll Use
- **POST** `/act_{ad_account_id}/campaigns` - Create campaigns
- **POST** `/act_{ad_account_id}/adsets` - Create ad sets with targeting
- **POST** `/act_{ad_account_id}/ads` - Create ads with creative
- **POST** `/act_{ad_account_id}/adcreatives` - Upload ad creatives
- **POST** `/act_{ad_account_id}/adimages` - Upload images
- **POST** `/act_{ad_account_id}/advideos` - Upload videos
- **GET** `/act_{ad_account_id}/insights` - Fetch performance data (future)
- **GET** `/act_{ad_account_id}/campaigns` - List campaigns (future)

#### Data We'll Send to Meta
- Ad creative (image/video file)
- Ad copy (headline, body, CTA)
- Targeting parameters (location, age, interests - AI-generated)
- Budget and schedule
- Optimization goal (conversions, reach, etc.)

#### Data We'll Read from Meta
- Campaign ID (after creation)
- Ad Set ID (after creation)
- Ad ID (after creation)
- Spend data (for elite tier billing)
- Performance metrics (impressions, clicks, conversions - future feature)

---

### TIKTOK Ads API

#### Ad Specifications
**Video Ads (Primary Format):**
- Formats: MP4, MOV
- Max file size: 287.6MB
- Aspect ratio: 9:16 (vertical, recommended 1080x1920px)
- Duration: 5-60 seconds (9-15 seconds optimal)
- Min resolution: 540x960px
- Frame rate: 23-60fps

**Image Ads (Feed):**
- Formats: JPG, PNG
- Max file size: 5MB
- Aspect ratio: 1:1 (recommended 1200x1200px)
- Min resolution: 640x640px

**Text Copy Limits:**
- Ad text: 100 characters max
- CTA: Predefined options (Learn More, Shop Now, Download, etc.)

#### Required API Permissions (OAuth Scopes)
- `advertiser.management` - Manage advertiser accounts
- `campaign.management` - Create and manage campaigns
- `ad.management` - Create and manage ads
- `creative.management` - Upload and manage creatives
- `report.read` - Read performance reports (future)

#### API Endpoints We'll Use
- **POST** `/open_api/v1.3/campaign/create/` - Create campaigns
- **POST** `/open_api/v1.3/adgroup/create/` - Create ad groups with targeting
- **POST** `/open_api/v1.3/ad/create/` - Create ads
- **POST** `/open_api/v1.3/file/video/ad/upload/` - Upload videos
- **POST** `/open_api/v1.3/file/image/ad/upload/` - Upload images
- **GET** `/open_api/v1.3/report/integrated/get/` - Fetch performance (future)

#### Data We'll Send to TikTok
- Video/image creative
- Ad text (100 chars max)
- Landing page URL
- Targeting (location, age, gender, interests)
- Budget and schedule
- Optimization goal (clicks, conversions, app installs)

#### Data We'll Read from TikTok
- Campaign ID
- Ad Group ID
- Ad ID
- Spend data (for elite tier billing)
- Performance metrics (future)

---

### GOOGLE Ads API

#### Ad Specifications
**Display Ads (Image):**
- Formats: JPG, PNG, GIF
- Max file size: 150KB
- Common sizes:
  - Medium Rectangle: 300x250px
  - Leaderboard: 728x90px
  - Large Rectangle: 336x280px
  - Wide Skyscraper: 160x600px
  - Mobile Banner: 320x50px

**Responsive Display Ads:**
- Images: Min 600x314px (1.91:1), recommended 1200x628px
- Logos: Min 128x128px (1:1), recommended 1200x1200px

**Search Ads (Text Only):**
- Headlines: Up to 15 headlines, 30 characters each
- Descriptions: Up to 4 descriptions, 90 characters each
- Display path: 15 characters per path field

**Video Ads (YouTube):**
- Formats: MP4, MOV, AVI
- Max file size: 256GB
- Duration: 6 seconds to 3 minutes (skippable), 6-15 seconds (non-skippable)
- Aspect ratios: 16:9, 9:16, 1:1, 4:3

**Text Copy Limits:**
- Headline: 30 characters max (up to 15 headlines)
- Description: 90 characters max (up to 4 descriptions)
- Final URL display path: 15 characters per field

#### Required API Permissions (OAuth Scopes)
- `https://www.googleapis.com/auth/adwords` - Full Google Ads API access

#### API Endpoints We'll Use
- **CampaignService.mutateCampaigns** - Create campaigns
- **AdGroupService.mutateAdGroups** - Create ad groups
- **AdGroupAdService.mutateAdGroupAds** - Create ads
- **AssetService.mutateAssets** - Upload images/videos
- **GoogleAdsService.search** - Query performance data (future)

#### Data We'll Send to Google
- Ad creative (image/video asset IDs)
- Ad copy (headlines, descriptions)
- Keywords and targeting
- Location targeting
- Budget and bidding strategy
- Landing page URL

#### Data We'll Read from Google
- Campaign ID
- Ad Group ID
- Ad ID
- Spend data (for elite tier billing)
- Performance metrics (future)

---

### LINKEDIN Marketing API

#### Ad Specifications
**Sponsored Content (Image):**
- Formats: JPG, PNG
- Aspect ratio: 1.91:1 (recommended 1200x627px)
- Max file size: 5MB
- Min resolution: 640x360px

**Sponsored Content (Video):**
- Formats: MP4, MOV
- Aspect ratios: 1200x627 to 1920x1080
- Max duration: 10 minutes
- Max file size: 2GB
- Min resolution: 640x360px

**Text Copy Limits:**
- Introductory text: 150 characters max (600 max but truncated in feed)
- Headline: 200 characters max (70 max visible)
- CTA: Predefined options (Learn More, Sign Up, Download, etc.)

#### Required API Permissions (OAuth Scopes)
- `w_organization_social` - Post content on behalf of organization
- `rw_organization_admin` - Manage organization pages
- `r_organization_social` - Read organization content
- `r_ads` - Read advertising data
- `w_ads` - Create and manage ads
- `rw_ads` - Full advertising access

#### API Endpoints We'll Use
- **POST** `/adAccountsV2/{accountId}/adCampaigns` - Create campaigns
- **POST** `/adAccountsV2/{accountId}/adCampaignGroups` - Create campaign groups
- **POST** `/adAccountsV2/{accountId}/creatives` - Upload creatives
- **POST** `/assets?action=registerUpload` - Upload images/videos
- **GET** `/adAnalytics` - Fetch performance data (future)

#### Data We'll Send to LinkedIn
- Ad creative (image/video)
- Introductory text, headline
- Landing page URL
- Targeting (location, job title, industry, company size)
- Budget and schedule
- Objective (brand awareness, website visits, lead generation)

#### Data We'll Read from LinkedIn
- Campaign ID
- Creative ID
- Spend data (for elite tier billing)
- Performance metrics (future)

---

## 4. OAUTH IMPLEMENTATION

### OAuth Flow (All Platforms)
1. User clicks "Connect [Platform]" during campaign creation
2. xiXoi™ redirects to platform's OAuth authorization URL with:
   - `client_id` (our registered app ID)
   - `redirect_uri` (callback URL on our domain)
   - `scope` (requested permissions)
   - `state` (CSRF protection token)
3. User logs into platform and approves permissions
4. Platform redirects back to our `redirect_uri` with authorization code
5. Our backend exchanges code for access token + refresh token
6. Tokens encrypted and stored in Supabase with user_id association
7. Tokens used for all subsequent API calls on user's behalf

### Token Storage & Security
- Tokens stored in Supabase `auth.users` table or separate `platform_connections` table
- Encrypted at rest using Supabase encryption
- Never exposed to client-side JavaScript
- All API calls made from server-side Edge Functions only
- Refresh tokens used to renew expired access tokens automatically

### Token Refresh Strategy
- Check token expiration before each API call
- If expired, use refresh token to obtain new access token
- Update stored tokens with new values
- If refresh fails, prompt user to reconnect platform

---

## 5. PRIVACY & COMPLIANCE

### GDPR Compliance (EU Users)
- Users can request data export (JSON download of profile + campaigns)
- Users can delete account (cascade deletes all associated data)
- Cookie consent banner (if tracking cookies added)
- Privacy policy link in footer
- Data processing agreement available on request

### CCPA Compliance (California Users)
- "Do Not Sell My Personal Information" link in footer
- We do not sell user data to third parties
- Users can opt-out of data collection (account deletion)

### Terms of Service
- Users agree to platform ad policies (Meta, TikTok, Google, LinkedIn)
- Users responsible for ad content legality and compliance
- xiXoi™ not liable for rejected ads or policy violations
- Users own their uploaded content
- xiXoi™ has license to use content for ad generation only

### Ad Content Policies (User Responsibility)
Users must comply with each platform's advertising policies:
- **Meta**: Community Standards, Advertising Policies
- **TikTok**: Ad Creative Policy, Community Guidelines
- **Google**: Google Ads Policies, Restricted Content
- **LinkedIn**: Advertising Guidelines, Professional Community Policies

xiXoi™ does not pre-screen ad content but reserves right to suspend accounts violating platform policies.

---

## 6. API RATE LIMITS & USAGE

### Expected API Call Volume (Per User Per Campaign)
- **Meta**: ~10 calls (create campaign, ad set, ad, upload creative, publish)
- **TikTok**: ~8 calls (create campaign, ad group, ad, upload creative)
- **Google**: ~12 calls (create campaign, ad group, ads with multiple headlines/descriptions)
- **LinkedIn**: ~10 calls (create campaign group, campaign, creative, upload asset)

### Monthly Volume Estimates
- **Free Tier**: 1 ad/day = 30 campaigns/month = ~1,200 API calls/month (across all platforms)
- **Pro Tier**: ~10 campaigns/month per user = ~400 API calls/user/month
- **Elite Tier**: ~30 campaigns/month per user = ~1,200 API calls/user/month
- **Agency Tier**: ~100 campaigns/month per user = ~4,000 API calls/user/month

**Total Estimated Volume (1,000 active users):**
- ~500,000 API calls/month across all platforms
- ~125,000 calls per platform per month
- ~4,000 calls per day per platform (average)

### Rate Limit Handling
- Implement exponential backoff on 429 errors
- Queue API requests if rate limit reached
- Notify users of publishing delays due to rate limits
- Cache non-critical data to reduce API calls

---

## 7. BUSINESS MODEL & MONETIZATION

### Revenue Sources
1. **One-time campaign publishing**: $29 per ad set (removes watermark)
2. **Pro subscription**: $99/month (unlimited campaigns, no watermark)
3. **Elite subscription**: $199/month + 5% of ad spend across platforms
4. **Agency subscription**: $999/month (white-label, team seats, API access)

### How Platforms Benefit
- **Increased ad spend**: Our users are small businesses who wouldn't advertise otherwise
- **New advertisers**: xiXoi™ lowers barrier to entry for non-technical users
- **Higher ad quality**: AI-generated copy optimized for each platform's best practices
- **Compliance**: Auto-targeting reduces discriminatory targeting violations

### Target Audience
- Small businesses (1-10 employees)
- E-commerce brands
- Local service providers
- Solopreneurs and freelancers
- Marketing agencies managing multiple clients

---

## 8. SECURITY & INFRASTRUCTURE

### Infrastructure
- **Hosting**: Lovable Cloud (Supabase backend)
- **CDN**: Cloudflare (frontend assets)
- **Database**: PostgreSQL (Supabase managed)
- **Storage**: Supabase Storage (S3-compatible)
- **Edge Functions**: Deno runtime (serverless)

### Security Measures
- HTTPS-only (TLS 1.3)
- Row-Level Security (RLS) on all database tables
- OAuth tokens encrypted at rest
- CSRF protection (state parameter in OAuth flow)
- Content Security Policy (CSP) headers
- Regular dependency updates (automated via Dependabot)
- No SQL injection risk (parameterized queries only)

### Monitoring & Logging
- Edge function logs (Supabase dashboard)
- Error tracking (console logs, future: Sentry integration)
- API call success/failure rates (future)
- User session tracking (Supabase Auth events)

---

## 9. SUPPORT & DOCUMENTATION

### User Support Channels
- Email: support@xixoi.com (future)
- In-app help center (future)
- FAQ page (future)
- Video tutorials (future)

### Developer Documentation
- API integration guide (this document)
- Platform-specific guides (Meta, TikTok, Google, LinkedIn)
- OAuth setup instructions
- Troubleshooting common errors

---

## 10. FUTURE FEATURES (NOT YET IMPLEMENTED)

These features are planned but not yet built:
- **Performance dashboard**: Display campaign metrics inside xiXoi™
- **A/B testing**: Test multiple ad variants automatically
- **Auto-optimization**: Increase budget on high-performing campaigns (Elite tier)
- **Custom avatars**: Generate AI avatars for UGC-style ads (Elite tier)
- **Affiliate program**: 20% commission for referrals (Elite tier)
- **White-label platform**: Custom branding for agencies (Agency tier)
- **API access**: Programmatic campaign creation (Agency tier)

---

## 11. CONTACT INFORMATION

**Company**: xiXoi™  
**Website**: https://xixoi.com (deployed domain TBD)  
**App Callback URLs**: 
- Production: https://xixoi.com/oauth/callback
- Staging: https://[project-id].lovable.app/oauth/callback

**Technical Contact**:
- Name: [Your Name]
- Email: [Your Email]
- Role: Founder / CTO

**Business Contact**:
- Name: [Your Name]
- Email: [Your Email]
- Role: Founder / CEO

---

## 12. PLATFORM-SPECIFIC APP REGISTRATION

### Meta App Registration
1. Create app at https://developers.facebook.com/apps
2. App Type: Business
3. Use Case: Advertiser Support
4. Add product: Marketing API
5. Request permissions: ads_management, business_management
6. Submit for App Review with this documentation + demo video
7. Set Privacy Policy URL
8. Set Terms of Service URL
9. Add redirect URI: https://xixoi.com/oauth/callback

### TikTok App Registration
1. Apply at https://ads.tiktok.com/marketing_api/homepage
2. Fill out application form with company details
3. Use Case: Ad Management Platform
4. Attach this documentation
5. Wait for approval (1-2 weeks)
6. Configure OAuth redirect URI in developer portal

### Google Ads API Registration
1. Apply at https://developers.google.com/google-ads/api/docs/first-call/oauth-cloud-project
2. Create OAuth 2.0 credentials
3. Request developer token
4. Complete OAuth consent screen
5. Add scopes: adwords
6. Submit for verification with this documentation
7. Add redirect URI: https://xixoi.com/oauth/callback

### LinkedIn API Registration
1. Create app at https://www.linkedin.com/developers/apps
2. Add products: Marketing Developer Platform
3. Request OAuth scopes: rw_ads, rw_organization_admin
4. Complete compliance questionnaire
5. Attach this documentation
6. Add redirect URL: https://xixoi.com/oauth/callback
7. Submit for review

---

## 13. DEMO VIDEO SCRIPT (For App Review)

**Duration: 2-3 minutes**

1. **Intro (10s)**: "xiXoi™ automates ad creation for small businesses across Meta, TikTok, Google, and LinkedIn."

2. **User Login (10s)**: Show user signing up with email/Google OAuth.

3. **Upload Content (20s)**: 
   - User uploads product image
   - Enters product description
   - Shows file validation (5MB image limit)

4. **AI Generation (30s)**:
   - Show loading state
   - Display 4 AI-generated ad variants (Meta, TikTok, Google, LinkedIn)
   - Show character count compliance for each platform

5. **Targeting (20s)**:
   - Show auto-generated audience suggestions
   - User adjusts location and daily budget via slider
   - Explain that targeting is AI-decided to ensure compliance

6. **Payment (15s)**:
   - Show payment modal ($29 per campaign or $99/month)
   - Complete Stripe checkout

7. **Platform Connection (30s)**:
   - User clicks "Connect Meta"
   - Redirect to Meta OAuth consent screen
   - User approves permissions
   - Redirect back to xiXoi™ showing "Connected ✓"
   - Repeat briefly for other platforms

8. **Publishing (20s)**:
   - User clicks "Publish to Meta + TikTok"
   - Show success confirmation
   - Display ad preview without watermark

9. **Outro (10s)**: "xiXoi™ makes advertising accessible to everyone. APIs used: Meta Marketing API, TikTok Ads API, Google Ads API, LinkedIn Marketing API."

---

## CHECKLIST FOR API APPROVAL SUBMISSION

### Documentation
- [ ] This compliance guide (completed)
- [ ] Privacy policy page (needs creation)
- [ ] Terms of service page (needs creation)
- [ ] Data deletion instructions page (needs creation)

### App Setup
- [ ] Custom domain configured (xixoi.com)
- [ ] OAuth callback URLs configured
- [ ] SSL certificate (automatic via hosting)
- [ ] App logo (512x512px for Meta, 1024x1024px for others)

### Demo Materials
- [ ] Screen recording demo video (2-3 minutes)
- [ ] Screenshots of each user flow step
- [ ] Example ad creatives generated by platform

### Legal
- [ ] Business registration documents
- [ ] Developer/business contact information
- [ ] Data processing agreement (for GDPR)

### Technical Review
- [ ] Test OAuth flow for each platform
- [ ] Verify API call payloads match platform specs
- [ ] Confirm rate limit handling implemented
- [ ] Test error handling for failed API calls

---

**Last Updated**: 2025-11-13  
**Version**: 1.0  
**Status**: Pre-launch / API approval preparation
